{% extends "two_factor/_base.html" %}
{% load i18n %}
{% load two_factor_tags %}
{% load epilepsy12_template_tags %}

{% block content %}
<div class='ui rcpch container'>
  <div class="ui two column centered grid">
    <div class="column">
      <h1>{% block title %}{% trans "Account Settings" %}{% endblock %}</h1>

      {% if default_device %}
        <p>Your method of Two-Factor Authentication is working: </p>
          <ul>
            <li>
              {% if default_device_type == 'EmailDevice' %}
                <p>Your OTP code will be sent to your registered email.</p>
              {% else %}
                <p>Enter the token generated by the <a class="rcpch_blue_link" href="https://www.microsoft.com/en-gb/security/mobile-authenticator-app">Microsoft Authenticator</a> app.</p>
              {% endif %}
            </li>
          </ul>

          {% with user_organisation_id=user|get_org_id_from_user %}
            <div class="ui buttons">
              <a href="{% url 'selected_organisation_summary' organisation_id=user_organisation_id  %}" class="ui rcpch_primary positive button">Organisation Summary</a>
              <div class="or"></div>
              <a href="{% url 'index' %}" class="ui rcpch_primary button">Home page</a>
            </div>
          {% endwith %}
        
          <h2>Reset Two-Factor Authentication</h2>
          <p>Click <a class="rcpch_blue_link" href="{% url 'two_factor:disable' %}">here</a> to reset your default method of Two-factor authentication.</p>
          <p></p>
      {% else %}
        <p class=" ui rcpch_warning message">
          {% blocktrans trimmed %}Two-factor authentication is not enabled for your
          account. You must enable this to use the Epilepsy12 platform.{% endblocktrans %}
        </p>
        <p>
          <a href="{% url 'two_factor:setup' %}" class="rcpch_blue_link">
            {% trans "Enable Two-Factor Authentication" %}
          </a>
        </p>
      {% endif %}


      <h2>Reset Password</h2>
      <a href="{% url 'password_reset' %}" class="rcpch_blue_link">Click here to reset your password.</a>
    </div>
  </div>
</div>
{% endblock %}