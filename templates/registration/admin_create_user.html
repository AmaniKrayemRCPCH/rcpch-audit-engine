{% extends 'base.html' %}
{% load static %}

{% block content %}

<div class='ui container'>

  <div class="ui two column centered grid">
    
    <div class="column">
      
      <div class="ui header">
        <img src='{% static "images/epilepsy12-logo-1.png" %}'>
        <div class="content">
          <h2>{{title}}</h2>
        </div>
      </div>
      
      <form class='ui rcpch form' method="POST" action="">
        {% csrf_token %}

        <div class='three fields'>
          <div class='three wide field'>
            <label for="{{form.title.id_for_label}}">Title</label>
            {{ form.title }}
            <div class='field error'>
              {{ form.title.errors }}
            </div>
          </div>
          <div class='six wide field'>
            <label for="{{form.first_name.id_for_label}}">First name</label>
            {{ form.first_name }}
            <div class='field error'>
              {{ form.first_name.errors }}
            </div>
          </div>
          <div class='seven wide field'>
            <label for="{{form.surname.id_for_label}}">Surname</label>
            {{ form.surname }}
            <div class='field error'>
              {{ form.surname.errors }}
            </div>
          </div>
        </div>
        
        <div class='two fields'>

          <div class='field'>
            <label for="{{form.email.id_for_label}}">Email address</label>
            {{ form.email }}
            {{ form.email.errors }}
          </div>
          
          <div class='field'>
            <label for="{{form.role.id_for_label}}">Role</label>
            {{ form.role }}
            <div class='field error'>
              {{ form.role.errors }}
            </div>
          </div>
        
        </div>
        
        {% if not user.is_staff or user.is_superuser %}
          <div class='field'>
            <label for="{{form.hospital_employer.id_for_label}}">Employer</label>
            {{ form.hospital_employer }}
            <div class='field error'>
              {{ form.hospital_employer.errors }}
            </div>
          </div>
        {% endif %}

        <div class='three fields'>

          {% if user.is_staff or user.is_superuser%}
            <div class='six wide field'>
              <label for="{{form.email.id_for_label}}">RCPCH Audit Team member</label>
              <div class='ui toggle checkbox' id='is_staff' _="js $('.ui.toggle.checkbox').checkbox(); end">
                {{ form.is_rcpch_audit_team_member }}
              </div>
              <div class='field error'>
                {{ form.is_rcpch_audit_team_member.errors }}
              </div>
            </div>
          {% endif %}
          
          {% if user.is_staff or user.is_superuser%}
            <div class='five wide field'>
              <label for="{{form.email.id_for_label}}">RCPCH Staff</label>
              <div class='ui toggle checkbox' id='is_staff' _="js $('.ui.toggle.checkbox').checkbox(); end">
                {{ form.is_staff }}
              </div>
              <div class='field error'>
                {{ form.is_staff.errors }}
              </div>
            </div>
          {% endif %}
          
          {% if user.is_superuser %}
            <div class='five wide field'>
              <label for="{{form.is_superuser.id_for_label}}">Superuser</label>
              <div class='ui toggle checkbox' id='is_staff' _="js $('.ui.toggle.checkbox').checkbox(); end">
                {{ form.is_superuser }}
              </div>
              <div class='field error'>
                {{ form.is_superuser.errors }}
              </div>
            </div>
          {% endif %}

        </div>

        <input class="ui rcpch_primary button" type="submit" value="{{title}}"/>
        {% if perms.epilepsy12.delete_epilepsy12user %}
          <button 
            type="submit" 
            class="ui rcpch_danger button"
            name="delete"
            _= "on click(issueRequest) halt the event call Swal.fire({ title: 'Confirmation Required', text: 'This will irreversibly remove user and related dated from Epilepsy12.', icon: 'warning', iconColor: '#e00087', showCancelButton: true, confirmButtonColor: '#11a7f2', cancelButtonColor: '#e60700', confirmButtonText: 'Remove user from Epilepsy12' }) if result.isConfirmed issueRequest()"
          >Delete</button>
        {% endif %}
        <button 
          type="submit" 
          class="ui rcpch_negative button"
          name="cancel"
        >Cancel</button>

      </form>
    </div>

  </div>

</div>

{% endblock %}



