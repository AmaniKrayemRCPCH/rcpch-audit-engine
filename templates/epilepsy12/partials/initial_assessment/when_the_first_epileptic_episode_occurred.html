<div class="ui form" hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}' >
    <div class="three fields">
        
        <div class="field"
        hx-post="{% url 'when_the_first_epileptic_episode_occurred' initial_assessment_id=initial_assessment.pk %}"
        hx-target="#when_the_first_epileptic_episode_occurred"
        hx-trigger="change"
        >
            <label>Date of first episode</label>
        <input
            name="when_the_first_epileptic_episode_occurred"
            type="date"
            value={{initial_assessment.when_the_first_epileptic_episode_occurred|date:'Y-m-d'}}
        />
        </div>
        
        {% if initial_assessment.when_the_first_epileptic_episode_occurred %}
            <div class="field" 
                hx-post="{% url 'when_the_first_epileptic_episode_occurred_confidence' initial_assessment_id=initial_assessment.pk %}" 
                hx-target="#when_the_first_epileptic_episode_occurred_confidence_result" 
                hx-trigger="load, change"
                hx-swap="innerHTML"
                >
                <label>Confidence in reported date of first episode</label>
                <select 
                    class="ui dropdown" 
                    name="when_the_first_epileptic_episode_occurred_confidence"
                >
                    {% for item in when_the_first_epileptic_episode_occurred_confidence_selection %}
                        {% if initial_assessment.when_the_first_epileptic_episode_occurred_confidence == item.0 %}
                            <option selected value={{item.0}}>{{item.1}}</option>
                        {% else %}
                            <option value={{item.0}}>{{item.1}}</option>
                        {% endif %}
                    {% endfor %}
                </select>
                <div id="when_the_first_epileptic_episode_occurred_confidence_result"></div>
            </div>

            <div class="field">
                <label>Epilepsy years</label>
                <input disabled value="{{initial_assessment.epilepsy_decimal_years}}"/>
            </div>
        {% endif%}

    </div>

    {% if initial_assessment.when_the_first_epileptic_episode_occurred %}
        <div class="ui segment">
            <div class="header">
                During the time period from the patient's first paroxysmal episode considered epileptic to the first paediatric assessment select where there is documentation of the following:
            </div>
            <div class="two fields">

                <div class="field">

                    {% if initial_assessment.has_description_of_the_episode_or_episodes_been_gathered %}
                    <span>
                        <div 
                            class="ui tiny compact toggle button active"
                            hx-target="#when_the_first_epileptic_episode_occurred"
                            hx-post="{% url 'has_description_of_the_episode_or_episodes_been_gathered' initial_assessment_id=initial_assessment.pk %}"
                            hx-swap="innerHTML"
                        >Yes</div>
                        <label>A description of the episode(s)</label>
                    </span>
                    {% else %}
                    <span>
                        <div 
                            class="ui tiny compact toggle button"
                            hx-target="#when_the_first_epileptic_episode_occurred"
                            hx-trigger='click' 
                            hx-post="{% url 'has_description_of_the_episode_or_episodes_been_gathered' initial_assessment_id=initial_assessment.pk %}"
                            hx-swap="innerHTML"
                        >No</div>
                        <label>A description of the episode(s)</label>
                    </span>
                    {% endif %}

                </div>

                <div class="field">

                    {% if initial_assessment.has_number_of_episodes_since_the_first_been_documented %}
                    <span>
                        <div 
                            class="ui tiny compact toggle button active"
                            hx-target="#when_the_first_epileptic_episode_occurred"
                            hx-post="{% url 'has_number_of_episodes_since_the_first_been_documented' initial_assessment_id=initial_assessment.pk %}"
                            hx-swap="innerHTML"
                        >Yes</div>
                        <label>The number of episodes</label>
                    </span>
                    {% else %}
                    <span>
                        <div 
                            class="ui tiny compact toggle button"
                            hx-target="#when_the_first_epileptic_episode_occurred"
                            hx-trigger='click' 
                            hx-post="{% url 'has_number_of_episodes_since_the_first_been_documented' initial_assessment_id=initial_assessment.pk %}"
                            hx-swap="innerHTML"
                        >No</div>
                        <label>The number of episodes</label>
                    </span>
                    {% endif %}

                </div>
                
            </div>

            <div class="two fields">

                <div class="field">
                    {% if initial_assessment.general_examination_performed %}
                    <span>
                        <div 
                            class="ui tiny compact toggle button active"
                            hx-target="#when_the_first_epileptic_episode_occurred"
                            hx-post="{% url 'general_examination_performed' initial_assessment_id=initial_assessment.pk %}"
                            hx-swap="innerHTML"
                        >Yes</div>
                        <label>Clinical examination has been performed.</label>
                    </span>
                    {% else %}
                    <span>
                        <div 
                            class="ui tiny compact toggle button"
                            hx-target="#when_the_first_epileptic_episode_occurred"
                            hx-trigger='click' 
                            hx-post="{% url 'general_examination_performed' initial_assessment_id=initial_assessment.pk %}"
                            hx-swap="innerHTML"
                        >No</div>
                        <label>Clinical examination has been performed.</label>
                    </span>
                    {% endif %}
                </div>

                <div class="field">
                    {% if initial_assessment.neurological_examination_performed %}
                    <span>
                        <div 
                            class="ui tiny compact toggle button active"
                            hx-target="#when_the_first_epileptic_episode_occurred"
                            hx-post="{% url 'neurological_examination_performed' initial_assessment_id=initial_assessment.pk %}"
                            hx-swap="innerHTML"
                        >Yes</div>
                        <label>A neurological examination has been performed.</label>
                    </span>
                    {% else %}
                    <span>
                        <div 
                            class="ui tiny compact toggle button"
                            hx-target="#when_the_first_epileptic_episode_occurred"
                            hx-trigger='click' 
                            hx-post="{% url 'neurological_examination_performed' initial_assessment_id=initial_assessment.pk %}"
                            hx-swap="innerHTML"
                        >No</div>
                        <label>A neurological examination has been performed.</label>
                    </span>
                    {% endif %}
                </div>
                    
            </div>

            <div class="two fields">

                <div class="field">
                    {% if initial_assessment.developmental_learning_or_schooling_problems %}
                    <span>
                        <div 
                            class="ui tiny compact toggle button active"
                            hx-target="#when_the_first_epileptic_episode_occurred"
                            hx-post="{% url 'developmental_learning_or_schooling_problems' initial_assessment_id=initial_assessment.pk %}"
                            hx-swap="innerHTML"
                        >Yes</div>
                        <label>Learning, developmental or educational difficulties have been sought.</label>
                    </span>
                    {% else %}
                    <span>
                        <div 
                            class="ui tiny compact toggle button"
                            hx-target="#when_the_first_epileptic_episode_occurred"
                            hx-trigger='click' 
                            hx-post="{% url 'developmental_learning_or_schooling_problems' initial_assessment_id=initial_assessment.pk %}"
                            hx-swap="innerHTML"
                        >No</div>
                        <label>Learning, developmental or educational difficulties have been sought.</label>
                    </span>
                    {% endif %}
                </div>

                <div class="field">
                    {% if initial_assessment.behavioural_or_emotional_problems %}
                    <span>
                        <div 
                            class="ui tiny compact toggle button active"
                            hx-target="#when_the_first_epileptic_episode_occurred"
                            hx-post="{% url 'behavioural_or_emotional_problems' initial_assessment_id=initial_assessment.pk %}"
                            hx-swap="innerHTML"
                        >Yes</div>
                        <label>Emotional or behavioural problems have been sought.</label>
                    </span>
                    {% else %}
                    <span>
                        <div 
                            class="ui tiny compact toggle button"
                            hx-target="#when_the_first_epileptic_episode_occurred"
                            hx-trigger='click' 
                            hx-post="{% url 'behavioural_or_emotional_problems' initial_assessment_id=initial_assessment.pk %}"
                            hx-swap="innerHTML"
                        >No</div>
                        <label>Emotional or behavioural problems have been sought.</label>
                    </span>
                    {% endif %}
                </div>

            </div>

    {% endif %}

        <h5 class="header">
        Case Definition
        </h5>

        
        <div class="field" 
            hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}' 
            hx-post="{% url 'diagnostic_status' initial_assessment_id=initial_assessment.pk %}" 
            hx-target="#diagnostic_status_result" 
            hx-trigger="load, change"
            hx-swap="innerHTML"
            >
            <label>Diagnostic status</label>
            <select 
                class="ui dropdown" 
                name="diagnostic_status"
            >
                {% for item in diagnostic_status_selection %}
                    {% if initial_assessment.diagnostic_status == item.0 %}
                        <option selected value={{item.0}}>{{item.1}}</option>
                    {% else %}
                        <option value={{item.0}}>{{item.1}}</option>
                    {% endif %}
                {% endfor %}
            </select>
            <div hidden id="diagnostic_status_result"></div>
        </div>
        
        <div class="field" 
            hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}' 
            hx-post="{% url 'episode_definition' initial_assessment_id=initial_assessment.pk %}" 
            hx-target="#episode_definition_result" 
            hx-trigger="load, change"
            hx-swap="innerHTML"
            >
            <label>Episode definition</label>
            <select 
                class="ui dropdown" 
                name="episode_definition"
            >
                {% for item in episode_definition_selection %}
                    {% if initial_assessment.episode_definition == item.0 %}
                        <option selected value={{item.0}}>{{item.1}}</option>
                    {% else %}
                        <option value={{item.0}}>{{item.1}}</option>
                    {% endif %}
                {% endfor %}
            </select>
            <div hidden id="episode_definition_result"></div>
        </div>

    
</div>