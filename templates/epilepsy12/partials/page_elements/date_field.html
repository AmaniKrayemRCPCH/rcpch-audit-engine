{% comment %}
    This date field is used in multiple places
    It accepts the following parameters
        hx_post: the url posted to including parameters
        hx_target: the id of the html element to target the server response
        hx_trigger: usually 'change' but can be any event
        label: this is the label text (accessed from the help text in the model)
        reference: this is the reference text (accessed from the help text in the model)
        date_value: date value
        data_position: this is the position of the popup label (js independent) ['top left', 'top center', 'top right', 'bottom left', 'bottom center', 'bottom right', 'right center', 'left center']
        input_date_field_name: the name of the input element - should match the field name being updated
        disabled
    NOTE - in the view, the value of the date can be retrieved by request.POST.get(FIELD_NAME_AS_A_STRING)
{% endcomment %}

    <div class="field">
        
        <label>{{label}}&nbsp;<span data-tooltip='{{reference}}'><i class="rcpch question circle icon"></i></span>
        </label>
        {% if error_message %}
            <div class='field error'>
        {% endif %}
            <div class='ui left icon input'>
                <input 
                    {% if disabled %}disabled{% endif %}
                    type="date"
                    hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'
                    hx-swap="{{hx_swap}}"
                    name="{{input_date_field_name}}"
                    hx-post="{{hx_post}}" 
                    hx-target="{{hx_target}}" 
                    hx-trigger="{{hx_trigger}}"
                    value="{{date_value|date:'Y-m-d'}}"/>
                <i class="htmx-indicator spinner loading icon" id="spinner"></i>

                {% if date_value is None or error_message %}
                    <i class="rcpch_light_blue dot circle outline icon"></i>
                {% else %}
                    <i class="rcpch_pink check circle outline icon"></i>
                {% endif %}
            </div>

        {% if error_message %}
            </div>
        {% endif %}

    </div>
