<!DOCTYPE html>
<html>
  {% load static %}
  <head>
    <meta charset="utf-8" />
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=2, user-scalable=no"
    />
    <meta
      name="description"
      content="The Epilepsy12 National Audit for Childhood Epilepsy."
    />
    <meta name="keywords" content="Epilepsy12 RCPCH Audit Childhood Epilepsy" />
    <meta name="author" content="RCPCH" />
    <meta name="theme-color" content="#ffffff" />
    <title>Epilepsy12</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css"
      type="text/css"
    />
    <link rel="icon" href="{% static 'images/favicon.ico' %}"/>
    <link rel="stylesheet" href="{% static 'styles/style.css' %}">
    
  </head>

  <body id="root">
    <div class="ui container">
      {% block nav %}
        <div class="ui secondary pointing menu">
            <a href= "https://www.rcpch.ac.uk/"><img id="nav-rcpch" src="{% static 'images/rcpch-logo.jpg' %}" class="item"></a>
            <a {% if request.resolver_match.url_name == 'index' %} class="active item" id="active_menu_item" {% else %} class="item" {% endif %} href={% url 'index' %}>
              Home
            </a>
          <a {% if request.resolver_match.url_name == 'admin:index' %} class="active item" id="active_menu_item" {% else %} class="item" {% endif %} href={% url 'admin:index' %}>
            Database Management
          </a>
            <a {% if request.resolver_match.url_name == 'hospital_reports' %} class="active item" id="active_menu_item" {% else %} class="item" {% endif %} id="link" href={% url 'hospital_reports' %}>
              Hospital Clinician
            </a>
            <a {% if request.resolver_match.url_name == 'eeg' %}class="active item" id="active_menu_item" {% else %} class="item" {% endif %} id="link" href={% url 'eeg' %}>
              EEG Department
            </a>
            <a {% if request.resolver_match.url_name == 'patient' %}class="active item" id="active_menu_item" {% else %} class="item" {% endif %} id="link" href={% url 'patient' %}>
              Patient Access
            </a>
          <div class="right menu">
          {% if user.is_authenticated %}
              <a class="item" href={% url 'logout' %}>
                Logout {{ user.username }}
              </a>
          {% else %}
            <a class="item" href="{% url 'login' %}">
              Log In
            </a>
          {% endif %}
          </div>
        </div>
      {% endblock %}
        
        {% if messages %}
          <div class="ui green message">
            <i class="close icon"></i>
                {% for message in messages %}
                  {% if message.tags %} {% endif %}{{ message }}
                {% endfor %}
          </div>
        {% endif %}

        {% block content %}
        {% endblock %}
        
        <div class="ui red message">This site is currently under development.</div>
        
        
          <div class="ui container">
            <div class="ui equal width centered middle aligned grid">
              <div class="ui column">
                <i class="github icon"></i>
                  <a href="https://github.com/rcpch/epilepsy12-server">Follow us on Github</a>
              </div>
              <div class="ui right aligned column">
                  <i class="copyright icon" id="logo"></i>
                  RCPCH 2021. All Rights Reserved
              </div>
            </div>
          </div>
        
    </div>
          
    <script src="{% static 'htmx_1.7/htmx.min.js' %}"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.8.0/dist/chart.min.js" integrity="sha256-cHVO4dqZfamRhWD7s4iXyaXWVK10odD+qp4xidFzqTI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.js" integrity="sha512-dqw6X88iGgZlTsONxZK9ePmJEFrmHwpuMrsUChjAw1mRUhUITE5QU9pkcSox+ynfLhL15Sv2al5A0LVyDCmtUw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  </body>
  
</html>
<script>
  $('.message .close').on('click', function() {
    $(this)
      .closest('.message')
      .transition('fade')
    ;
  });

  $('#casecompletionprogress').progress({
    label: 'ratio',
    text: {
      ratio: '{value} of {total}'
    }
  });

  $('div.ui.search.desscribeSearch').search({
    apiSettings: {
      url: "https://{{request.get_host}}/epilepsy12/semiology-keyword-autocomplete/?q={query}"
    },
    fields: {
      results: 'results',
      title: 'text'
    }
  });

  $('.ui.search.hospitalSearch').search({
    apiSettings: {
      url: "https://{{request.get_host}}/epilepsy12/hospital-autocomplete/?q={query}"
    },
    fields: {
      results: 'results',
      title: 'text'
    }
  });
  $('#choicesPopup').popup();
  $('#investigationsManagementPopup').popup();
  $('.question.circle.icon.link').popup();
  /*
  $('.prompt').on("input", function(data){
    console.log($('prompt').val());
    $('.text').text($('.prompt').val())
  })
  */
  $('.ui.dropdown').dropdown();

// jquery function
  $(document).ready(function(){
        var ctx = document.getElementById('piechart').getContext('2d');
        var myChart = new Chart(ctx, { 
            type: 'doughnut',
            data: {
                labels: [{% for data in cases %}'{{ data.ethnicity_display }}',{% endfor %}], //loop through queryset, 
                datasets: [{
                    data: [{% for case in cases %}{{ case.ethnicities }},{% endfor %}],
                    backgroundColor: [
                        'rgba(255, 99, 132, 0.2)', 
                        'rgba(54, 162, 235, 0.2)',
                        'rgba(255, 206, 86, 0.2)',
                        'rgba(75, 192, 192, 0.2)',
                        'rgba(153, 102, 255, 0.2)',
                        'rgba(255, 159, 64, 0.2)',
                        'rgba(229, 99, 153, 0.2)',
                        'rgba(211, 165, 136, 0.2)',
                        'rgba(236, 226, 208, 0.2)',
                        'rgba(127, 209, 185, 0.2)',
                        'rgba(122, 101, 99, 0.2)',
                        'rgba(222, 231, 231, 0.2)',
                        'rgba(183, 173, 207, 0.2)',
                        'rgba(79, 100, 111, 0.2)',
                        'rgba(83, 86, 87, 0.2)',
                        'rgba(226, 132, 19, 0.2)',
                        'rgba(245, 100, 22, 0.2)',
                        'rgba(221, 75, 26, 0.2)',
                    ],
                    borderColor: [
                        'rgba(255, 99, 132, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)',
                        'rgba(255, 159, 64, 1)',
                        'rgba(229, 99, 153, 1)',
                        'rgba(211, 165, 136, 1)',
                        'rgba(236, 226, 208, 1)',
                        'rgba(127, 209, 185, 1)',
                        'rgba(122, 101, 99, 1)',
                        'rgba(222, 231, 231, 1)',
                        'rgba(183, 173, 207, 1)',
                        'rgba(79, 100, 111, 1)',
                        'rgba(83, 86, 87, 1)',
                        'rgba(226, 132, 19, 1)',
                        'rgba(245, 100, 22, 1)',
                        'rgba(221, 75, 26, 1)',
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                plugins: {
                  title: {
                    display: true,
                    text: "Ethnicity Distribution",
                    position: 'top',
                    align: 'start'
                  },
                  legend: {
                    display: true,
                    position: 'right'
                  }
                },
            }
});
    });



</script>